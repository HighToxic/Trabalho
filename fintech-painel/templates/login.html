<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Login - SafeBankTech</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="login-container">
        <div class="login-box-wrapper">

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        {% set css_class = 'flash-warning' if category == 'warning' else 'flash-success' %}
                        <div class="flash-msg {{ css_class }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <div class="login-box">
                <h2>üîê SafeBankTech</h2>
                <p class="login-subtitle">Painel administrativo</p>

                {% if erro %}
                    <div class="erro-msg">{{ erro }}</div>
                {% endif %}

                <form method="POST" action="{{ url_for('login') }}">
                    <div class="input-group">
                        <input type="text" name="usuario" placeholder="Usu√°rio" required>
                    </div>
                    <div class="input-group">
                        <input type="password" name="senha" placeholder="Senha" required>
                    </div>
                    <button type="submit" class="btn-primary full-width">Entrar</button>
                </form>

                <div class="login-divider">
                    <hr>ou<hr>
                </div>

                <a href="{{ url_for('google.login') }}" style="text-decoration: none;">
                    <button class="btn-google full-width">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo" class="google-icon">
                        Entrar com Google
                    </button>
                </a>
                </div>

            <div class="security-box">
                <div class="security-header">
                    <span>Modo de Seguran√ßa:</span>
                    {% if session.security_mode == 'inseguro' %}
                        <span class="badge-inseguro">DESATIVADO ‚ö†Ô∏è</span>
                    {% else %}
                        <span class="badge-seguro">ATIVADO üîí</span>
                    {% endif %}
                </div>
                
                <form action="{{ url_for('toggle_mode') }}" method="POST">
                    <button type="submit" class="btn-toggle full-width">
                        Alternar Modo
                    </button>
                </form>

                {% if session.security_mode == 'inseguro' %}
                <div class="security-instructions">
                    <strong>üéØ Como testar a falha:</strong>
                    <p>Usu√°rio: <code>admin' --</code></p>
                    <p>Senha: <code>qualquercoisa</code></p>
                </div>
                {% endif %}
            </div>

        </div> </div>
</body>
</html>
